"use strict";const e=require("../../../../common/vendor.js"),t={name:"UniIndexedList",components:{indexedListItem:()=>"./uni-indexed-list-item.js"},emits:["click"],props:{options:{type:Array,default:()=>[]},showSelect:{type:Boolean,default:!1}},data:()=>({lists:[],winHeight:0,itemHeight:0,winOffsetY:0,touchmove:!1,touchmoveIndex:-1,scrollViewId:"",touchmovable:!0,loaded:!1,isPC:!1}),watch:{options:{handler:function(){this.setList()},deep:!0}},mounted(){setTimeout((()=>{this.setList()}),50),setTimeout((()=>{this.loaded=!0}),300)},methods:{setList(){this.lists=[],this.options.forEach(((e,t)=>{if(0===e.data.length)return;let i=t,s=e.data.map((i=>{let s={};return s.key=e.letter,s.name=i,s.itemIndex=t,t++,s.checked=!!i.checked&&i.checked,s}));this.lists.push({title:e.letter,key:e.letter,items:s,itemIndex:i})})),e.index.createSelectorQuery().in(this).select("#list").boundingClientRect().exec((e=>{this.winOffsetY=e[0].top,this.winHeight=e[0].height,this.itemHeight=this.winHeight/this.lists.length}))},touchStart(e){this.touchmove=!0;let t=this.isPC?e.pageY:e.touches[0].pageY,i=Math.floor((t-this.winOffsetY)/this.itemHeight);this.lists[i]&&(this.scrollViewId="uni-indexed-list-"+i,this.touchmoveIndex=i)},touchMove(e){let t=this.isPC?e.pageY:e.touches[0].pageY,i=Math.floor((t-this.winOffsetY)/this.itemHeight);if(this.touchmoveIndex===i)return!1;this.lists[i]&&(this.scrollViewId="uni-indexed-list-"+i,this.touchmoveIndex=i)},touchEnd(){this.touchmove=!1},mousedown(e){this.isPC&&this.touchStart(e)},mousemove(e){this.isPC&&this.touchMove(e)},mouseleave(e){this.isPC&&this.touchEnd(e)},onClick(e){let{idx:t,index:i}=e,s={};for(let h in this.lists[t].items[i])s[h]=this.lists[t].items[i][h];let o=[];this.showSelect&&(this.lists[t].items[i].checked=!this.lists[t].items[i].checked,this.lists.forEach(((e,t)=>{e.items.forEach(((e,i)=>{if(e.checked){let e={};for(let s in this.lists[t].items[i])e[s]=this.lists[t].items[i][s];o.push(e)}}))}))),this.$emit("click",{item:s,select:o})}}};if(!Array){e.resolveComponent("indexed-list-item")()}const i=e._export_sfc(t,[["render",function(t,i,s,o,h,n){return e.e({a:e.f(h.lists,((t,i,o)=>({a:e.o(n.onClick,i),b:"e7e54879-0-"+o,c:e.p({list:t,loaded:h.loaded,idx:i,showSelect:s.showSelect}),d:i,e:"uni-indexed-list-"+i}))),b:h.scrollViewId,c:e.f(h.lists,((t,i,s)=>({a:e.t(t.key),b:e.n(h.touchmoveIndex==i?"uni-indexed-list__menu-text--active":""),c:i,d:e.n(h.touchmoveIndex==i?"uni-indexed-list__menu--active":"")}))),d:e.o(((...e)=>n.touchStart&&n.touchStart(...e))),e:e.o(((...e)=>n.touchMove&&n.touchMove(...e))),f:e.o(((...e)=>n.touchEnd&&n.touchEnd(...e))),g:e.o(((...e)=>n.mousedown&&n.mousedown(...e))),h:e.o(((...e)=>n.mousemove&&n.mousemove(...e))),i:e.o(((...e)=>n.mouseleave&&n.mouseleave(...e))),j:h.touchmove},h.touchmove?{k:e.t(h.lists[h.touchmoveIndex].key)}:{})}],["__scopeId","data-v-e7e54879"]]);wx.createComponent(i);
