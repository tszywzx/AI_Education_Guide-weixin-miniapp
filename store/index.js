"use strict";const e=require("../common/vendor.js"),n=e.createStore({state:{hasLogin:!1,isUniverifyLogin:!1,loginProvider:"",openid:null,userInfo:{avatarUrl:"",nickName:""},testvuex:!1,colorIndex:0,colorList:["#FF0000","#00FF00","#0000FF"],noMatchLeftWindow:!0,active:"componentPage",leftWinActive:"/pages/component/view/view",activeOpen:"",menu:[],univerifyErrorMsg:"",username:"foo",sex:"男",age:10},mutations:{login(e,n){e.hasLogin=!0,e.loginProvider=n},updateUserInfo(e,n){e.userInfo=n,e.hasLogin=!0},logout(e){e.hasLogin=!1,e.openid=null,e.userInfo={avatarUrl:"",nickName:""}},setOpenid(e,n){e.openid=n},setTestTrue(e){e.testvuex=!0},setTestFalse(e){e.testvuex=!1},setColorIndex(e,n){e.colorIndex=n},setMatchLeftWindow(e,n){e.noMatchLeftWindow=!n},setActive(e,n){e.active=n},setLeftWinActive(e,n){e.leftWinActive=n},setActiveOpen(e,n){e.activeOpen=n},setMenu(e,n){e.menu=n},setUniverifyLogin(e,n){"boolean"!=typeof n&&(n=!!n),e.isUniverifyLogin=n},setUniverifyErrorMsg(e,n=""){e.univerifyErrorMsg=n},increment(e){e.age++},incrementTen(e,n){e.age+=n.amount},resetAge(e){e.age=10}},getters:{currentColor:e=>e.colorList[e.colorIndex],doubleAge:e=>2*e.age},actions:{incrementAsync(e,n){e.commit("incrementTen",n)},getUserOpenId:async function({commit:n,state:t}){return await new Promise(((o,i)=>{t.openid?o(t.openid):e.index.login({success:e=>{n("login"),setTimeout((function(){const e="123456789";console.log("uni.request mock openid[123456789]"),n("setOpenid",e),o(e)}),1e3)},fail:e=>{console.log("uni.login 接口调用失败，将无法正常使用开放接口等服务",e),i(e)}})}))},getPhoneNumber:function({commit:n},t){return new Promise(((n,o)=>{e.index.request({url:"https://97fca9f2-41f6-449f-a35e-3f135d4c3875.bspapp.com/http/univerify-login",method:"POST",data:t,success:e=>{const t=e.data;t.success?n(t.phoneNumber):o(e)},fail:e=>{o(res)}})}))}}});exports.store=n;
